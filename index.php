
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
	<meta name="description" content="" />
	<meta name="author" content="" />
    <title>EasyCite</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.png" />
	<!-- Google Tag Manager 
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-MBF5VGG');</script>
	--><!-- End Google Tag Manager -->
	<!-- Google tag (gtag.js) --> 
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-71QQMYPSH4"></script> 
	<script>   window.dataLayer = window.dataLayer || [];   function gtag(){dataLayer.push(arguments);}   gtag('js', new Date());   gtag('config', 'G-71QQMYPSH4'); </script>
	
<script>
//Tracking script
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-91234614-1', 'auto');
  ga('send', 'pageview');
</script>
	
    <!-- Core theme CSS, JS & JQUERY (includes Bootstrap)-->
    <!--<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<link href="css/main.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>-->
   

	
	
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

	<!-- RMIT stylesheet-->
	<link href="css/main.css" rel="stylesheet">
	<!-- Easy Cite stylesheet-->
	<link href="css/easycite.css" rel="stylesheet">
	
	<!--<link rel="stylesheet" href="https://rmitlibrary.github.io/rmit-ui/main.a6920974bb956370c6f620c64120f27b3809b38bc662ffc4d0c3e8b31e4bfab58d15e2b021b2fbb83b9eb476dfdf4e39c24a4c853170bcf8f0e37a0369af15ad.css">-->
	
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<a name="top"></a>
	
<div id="embedhide" class="hideembedded">
<!-- Responsive navbar-->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
	<div class="container">
		<div class="topnav-logosection">
               
                  <a href="https://www.rmit.edu.au" aria-label="Royal Melbourne Institute of Technology University Logo" tabindex="0" class="rmit-logo">
                     <span class="no-focus" tabindex="-1">

						 <svg width="115px" height="40px" viewBox="0 0 469 163" version="1.1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"> 
    
 <defs> 
  <polygon id="path-1" points="0.3133 0.8953 24.8973 0.8953 24.8973 40 0.3133 40"></polygon> 
 </defs> 
 <g id="Style" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> 
  <g id="Logo/Primary-Monochrome"> 
   <g id="Group-2" transform="translate(0.000000, -0.000100)"> 
    <path d="M55.843,4.33431069e-13 L41.59,4.33431069e-13 L41.59,11.569 L17.848,11.569 L17.848,35.683 L6.39488462e-14,35.683 L6.39488462e-14,71.352 L18.074,71.352 L18.074,94.825 L41.59,94.825 L41.59,106.79 L54.143,106.79 C83.468,106.79 109.36,83.157 109.36,53.518 C109.36,24.184 85.195,4.33431069e-13 55.843,4.33431069e-13" id="Fill-1" fill="#E60028"></path> 
    <g id="Group" transform="translate(132.772300, 5.628700)"> 
     <polygon id="Fill-4" fill="#FFFFFF" points="209.8149 4.6326 222.1609 4.6326 222.1609 91.0606 209.8149 91.0606 209.8149 95.5226 252.7559 95.5226 252.7559 91.0606 240.4049 91.0606 240.4049 4.6326 252.7559 4.6326 252.7559 0.0706 209.8149 0.0706"></polygon> 
     <path d="M334.4535,0.0754 L258.0095,0.0754 L256.4555,25.2014 L260.9695,25.2014 C263.5725,6.9674 267.0135,2.6694 287.1215,3.6854 L287.1215,91.0644 L273.9745,91.0644 L273.9745,95.5274 L318.5675,95.5274 L318.5675,91.0644 L305.4125,91.0644 L305.4125,3.6854 C325.5615,2.6694 328.9705,6.9674 331.5495,25.2014 L335.9745,25.2014 L334.4535,0.0754 Z" id="Fill-6" fill="#FFFFFF"></path> 
     <path d="M30.661,40.927 L30.661,4.538 L43.106,4.538 C55.767,4.538 60.465,7.762 60.465,23.704 C60.465,36.54 55.217,40.927 42.395,40.927 L30.661,40.927 Z M171.091,6.039 L171.091,90.919 L158.797,90.919 L158.797,95.367 L201.686,95.367 L201.686,90.919 L189.321,90.919 L189.321,4.538 L201.686,4.538 L201.686,0 L166.427,0 L145.744,65.252 L125.801,0 L90.735,0 L90.735,4.538 L103.025,4.538 L103.025,90.919 L89.733,90.919 C77.358,91.14 77.137,80.662 77.212,78.479 C77.358,55.24 72.218,46.796 49.916,43.351 L49.916,43.036 C63.209,41.633 80.168,37.872 80.168,21.756 C80.168,1.888 61.637,0 46.034,0 L-1.56319402e-13,0 L-1.56319402e-13,4.538 L12.365,4.538 L12.365,90.919 L-1.56319402e-13,90.919 L-1.56319402e-13,95.456 L42.951,95.456 L42.951,90.919 L30.661,90.919 L30.661,45.389 C38.55,45.069 47.479,47.017 51.47,50.557 C55.217,53.682 57.175,63.464 57.175,75.273 C57.175,89.827 64.772,95.367 79.208,95.367 L120.543,95.367 L120.543,90.919 L108.508,90.919 L108.508,6.039 L108.805,6.039 L137.211,95.367 L142.054,95.367 L170.607,6.039 L171.091,6.039 Z" id="Fill-8" fill="#FFFFFF"></path> 
     <path d="M35.7348,121.7307 L35.7348,142.6197 C35.7348,148.3437 32.1388,151.6897 26.6978,151.6897 C21.2708,151.6897 17.6608,148.3437 17.6608,142.6197 L17.6608,121.7307 C17.6608,119.3067 16.6578,118.2857 14.2108,118.2857 L8.8438,118.2857 L8.8438,122.9207 L11.1418,122.9207 C11.8808,122.9207 12.3278,123.3027 12.3278,124.0847 L12.3278,142.8647 C12.3278,151.0827 18.1028,156.7827 26.7398,156.7827 C35.3958,156.7827 41.1338,151.0827 41.1338,142.8647 L41.1338,124.0847 C41.1338,123.3027 41.5438,122.9207 42.3198,122.9207 L44.5888,122.9207 L44.5888,118.2857 L39.2468,118.2857 C36.8458,118.2857 35.7348,119.3067 35.7348,121.7307" id="Fill-10" fill="#FFFFFF"></path> 
     <path d="M76.5058,121.7307 L76.5058,142.2287 C76.5058,144.4317 76.8018,147.3967 76.8018,147.3967 L76.7268,147.3967 C76.7268,147.3967 74.9478,144.2617 73.5458,142.2287 L56.7888,118.2857 L51.8608,118.2857 L51.8608,150.2877 C51.8608,151.0827 51.4648,151.5437 50.6888,151.5437 L48.4158,151.5437 L48.4158,156.0817 L53.8048,156.0817 C56.2528,156.0817 57.2498,155.0597 57.2498,152.6357 L57.2498,132.1367 C57.2498,130.0997 56.9538,127.0587 56.9538,127.0587 L57.0288,127.0587 C57.0288,127.0587 58.7278,130.0997 60.1358,132.1367 L77.0238,156.0817 L81.8158,156.0817 L81.8158,124.0847 C81.8158,123.3027 82.2108,122.9207 82.9868,122.9207 L85.2608,122.9207 L85.2608,118.2857 L79.9428,118.2857 C77.4278,118.2857 76.5058,119.3057 76.5058,121.7307" id="Fill-12" fill="#FFFFFF"></path> 
     <polygon id="Fill-14" fill="#FFFFFF" points="90.0243 122.9211 93.7333 122.9211 93.7333 151.5441 90.0243 151.5441 90.0243 156.0811 102.4743 156.0811 102.4743 151.5441 98.8123 151.5441 98.8123 122.9211 102.4743 122.9211 102.4743 118.2851 90.0243 118.2851"></polygon> 
     <path d="M132.8285,121.4153 L124.5355,144.6573 C123.8345,146.7673 123.1325,149.8963 123.1325,149.8963 L122.9815,149.8963 C122.9815,149.8963 122.2805,146.7673 121.5795,144.6573 L113.2435,121.4153 C112.4155,118.9113 111.4695,118.2853 108.8055,118.2853 L105.7975,118.2853 L105.7975,122.9213 L106.5365,122.9213 C107.4865,122.9213 108.0235,123.1433 108.3625,124.0843 L120.2475,156.0813 L125.8765,156.0813 L137.7625,124.0843 C138.0675,123.1433 138.5755,122.9213 139.5555,122.9213 L140.3125,122.9213 L140.3125,118.2853 L137.2815,118.2853 C134.6315,118.2853 133.7615,118.9113 132.8285,121.4153" id="Fill-16" fill="#FFFFFF"></path> 
     <path d="M165.6166,150.2873 C165.6166,151.0823 165.2216,151.5443 164.4356,151.5443 L153.4116,151.5443 C152.7106,151.5443 152.2396,151.0823 152.2396,150.2873 L152.2396,139.3443 L165.4706,139.3443 L165.4706,134.7303 L152.2396,134.7303 L152.2396,122.9213 L163.0286,122.9213 C163.7296,122.9213 164.2096,123.3033 164.2096,124.0843 L164.2096,126.5083 L169.0576,126.5083 L169.0576,121.7303 C169.0576,119.3073 168.0416,118.2853 165.6166,118.2853 L143.3956,118.2853 L143.3956,122.9213 L146.8796,122.9213 L146.8796,152.6363 C146.8796,155.0593 147.9326,156.0813 150.2816,156.0813 L167.0956,156.0813 C169.5376,156.0813 170.5356,155.0593 170.5356,152.6363 L170.5356,147.9523 L165.6166,147.9523 L165.6166,150.2873 Z" id="Fill-18" fill="#FFFFFF"></path> 
     <path d="M190.018,136.4582 L183.056,136.4582 L183.056,122.9212 L190.135,122.9212 C194.131,122.9212 196.523,125.4162 196.523,129.5672 C196.523,133.7892 194.131,136.4582 190.018,136.4582 M201.404,150.2872 L196.829,141.2172 C196.203,139.9702 195.276,139.4892 195.276,139.4892 L195.276,139.4142 C197.93,138.7882 202.077,135.6582 202.077,129.3972 C202.077,122.4412 197.393,118.2852 190.729,118.2852 L174.254,118.2852 L174.254,122.9212 L177.747,122.9212 L177.747,156.0812 L183.056,156.0812 L183.056,141.0662 L187.985,141.0662 C190.093,141.0662 190.804,141.3022 191.741,143.1042 L196.904,153.2622 C198.17,155.6862 199.172,156.0812 202.152,156.0812 L204.792,156.0812 L204.792,151.5442 L204.086,151.5442 C202.769,151.5442 201.908,151.3932 201.404,150.2872" id="Fill-20" fill="#FFFFFF"></path> 
     <g id="Group-24" transform="translate(207.227700, 116.787400)"> 
      <mask id="mask-2" fill="white"> 
       <use xlink:href="#path-1"></use> 
      </mask> 
      <g id="Clip-23"></g> 
      <path d="M6.6633,10.8173 C6.6633,8.0033 9.2333,5.7433 13.3053,5.7433 C16.2663,5.7433 19.0853,7.1503 19.0853,9.1653 L19.0853,10.9773 L24.0643,10.9773 L24.0643,7.8523 C24.0643,2.6833 17.3013,0.8953 13.3053,0.8953 C6.1923,0.8953 1.1753,5.3293 1.1753,10.9773 C1.1753,22.7963 19.4613,21.5403 19.4613,29.4473 C19.4613,32.9633 16.5103,35.0773 12.9943,35.0773 C7.3643,35.0773 3.5283,30.5393 3.5283,30.5393 L0.3133,34.2993 C0.3133,34.2993 4.8603,40.0003 12.8623,40.0003 C20.3473,40.0003 24.8973,35.0023 24.8973,29.2023 C24.8973,16.7623 6.6633,18.4803 6.6633,10.8173" id="Fill-22" fill="#FFFFFF" mask="url(#mask-2)"></path> 
     </g> 
     <polygon id="Fill-25" fill="#FFFFFF" points="236.9555 122.9211 240.6445 122.9211 240.6445 151.5441 236.9555 151.5441 236.9555 156.0811 249.4425 156.0811 249.4425 151.5441 245.7245 151.5441 245.7245 122.9211 249.4425 122.9211 249.4425 118.2851 236.9555 118.2851"></polygon> 
     <path d="M282.2026,118.2854 L256.1266,118.2854 C253.7216,118.2854 252.9206,119.0854 252.9206,121.5094 L252.9206,126.5084 L257.6796,126.5084 L257.6796,124.0844 C257.6796,123.3034 258.1216,122.9214 258.8606,122.9214 L266.4586,122.9214 L266.4586,156.0814 L271.8666,156.0814 L271.8666,122.9214 L279.4586,122.9214 C280.1596,122.9214 280.6016,123.3034 280.6016,124.0844 L280.6016,126.5084 L285.3796,126.5084 L285.3796,121.5094 C285.3796,119.0854 284.5696,118.2854 282.2026,118.2854" id="Fill-27" fill="#FFFFFF"></path> 
     <path d="M311.3569,121.1936 L305.6379,130.7296 C304.4049,132.8436 303.3829,134.9526 303.3829,134.9526 L303.2329,134.9526 C303.2329,134.9526 302.1979,132.8436 300.9789,130.7296 L295.2309,121.1936 C293.7529,118.6896 292.7179,118.2856 290.1669,118.2856 L287.6629,118.2856 L287.6629,122.9216 L288.7539,122.9216 C289.8709,122.9216 290.3499,123.1426 291.0139,124.2536 L300.6439,139.5846 L300.6439,156.0866 L305.9769,156.0866 L305.9769,139.5846 L315.5129,124.2536 C316.2139,123.1426 316.7519,122.9216 317.8669,122.9216 L318.8699,122.9216 L318.8699,118.2856 L316.4599,118.2856 C313.9369,118.2856 312.8639,118.6896 311.3569,121.1936" id="Fill-29" fill="#FFFFFF"></path> 
    </g> 
   </g> 
  </g> 
 </g> 
</svg></span>
                  </a>
               
      </div>
	  <h1 class="echeadtitle">Easy Cite referencing guide</h1>
  		<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav ms-auto mb-2 mb-lg-0">
 				<li class="nav-item"><a class="nav-link topnavbar" href="https://www.rmit.edu.au/library" tabindex="0">Library&nbsp;&nbsp;&nbsp;</a></li>
				<li class="nav-item"><a class="nav-link topnavbar" href="https://www.rmit.edu.au/library/study/referencing" tabindex="0">Referencing&nbsp;&nbsp;&nbsp;</a></li>
			</ul>
		</div>
	</div>
</nav>
	
</div><!-- end embed-hide --> 	
	
<!-- Page content--> 
		
<!-- style guides content--> 	
<div class="container p-1"><!-- padding for content https://getbootstrap.com/docs/5.1/utilities/spacing/-->
<?php 
// include the parsedown code
require_once 'Parsedown.php';
$parsedown = new Parsedown();
// get the query string from the current URL as a text string - this part not yet working...
$queryString = $_SERVER['QUERY_STRING'];
$thisQuery = htmlentities($queryString);
// Use parse_str() function to parse the text string as an array
parse_str($thisQuery, $params); 
// save the result in a variable
$whichstyleguide = $params['styleguide'];
$showInfobox ='block'; 
//get the correct markdown content
if ($whichstyleguide == "styleguide-0"){
	$thestyleguide = file_get_contents('markdown/infotab.md');
	$thestyleguidetitle = "Using Easy Cite";
	$showInfobox ='block'; 
}	else if ($whichstyleguide == "styleguide-1"){
	$thestyleguide = file_get_contents('markdown/rmitharvard.md');
	$thestyleguidetitle = "RMIT Harvard";
	$showInfobox ='none'; 
}	else if ($whichstyleguide == "styleguide-2"){
	$thestyleguide = file_get_contents('markdown/aglc4.md');
	$thestyleguidetitle = "AGLC4";
	$showInfobox ='none'; 
}	else if ($whichstyleguide == "styleguide-3"){
	$thestyleguide = file_get_contents('markdown/apa7thed.md');
	$thestyleguidetitle = "APA 7<sup>th</sup> Edition";
	$showInfobox ='none'; 
}	else if ($whichstyleguide == "styleguide-4"){
	$thestyleguide = file_get_contents('markdown/chicagoa.md');
	$thestyleguidetitle = "Chicago A";
	$showInfobox ='none'; 
}	else if ($whichstyleguide == "styleguide-5"){
	$thestyleguide = file_get_contents('markdown/chicagob.md');
	$thestyleguidetitle = "Chicago B";
	$showInfobox ='none'; 
}	else if ($whichstyleguide == "styleguide-6"){
	$thestyleguide = file_get_contents('markdown/ieee.md');
	$thestyleguidetitle = "IEEE";
	$showInfobox ='none'; 
}	else if ($whichstyleguide == "styleguide-7"){
	$thestyleguide = file_get_contents('markdown/vancouver.md');
	$thestyleguidetitle = "Vancouver";
	$showInfobox ='none'; 
}	else {
	$thestyleguide = file_get_contents('markdown/infotab.md');
	$thestyleguidetitle = "Using Easy Cite";
	$showInfobox ='block'; 
}

// get the markdown content - populates the page with content from a particular style guide	
$mylist = $parsedown->text($thestyleguide);
	
//replace heading tags with bootstrap layout
// NAV TABS
$mylist = preg_replace("/<h6>start-style-menu<\/h6>/", '<ul class="nav nav-tabs" id="nav-tab" role="tablist">', $mylist);
$mylist = preg_replace("/<h1>/", '<li id="nav-xx-tab" class="nav-item" data-bs-toggle="tab" data-bs-target="#nav-xx" type="button" role="tab" aria-controls="nav-xx" aria-selected="false">
<a id="nav-link-xx" class="nav-link mynavtabs" href="#" tabindex="0" onclick="myFunction2(this, \'thisstyleguide\')">', $mylist);
$mylist = preg_replace("/<\/h1>/", '<div class="layer" aria-hidden="true">whichguidetitle</div></a></li>', $mylist);
$mylist = preg_replace("/<h6>end-style-menu<\/h6>/", '</ul><p>&nbsp;</p>', $mylist);
//REPLACE whichguidetitle with the correct title for the animated nav tabs
$mylist = preg_replace("/Using Easy Cite<div class=\"layer\" aria-hidden=\"true\">whichguidetitle<\/div>/", 'Using Easy Cite<div class="layer" aria-hidden="true">Using Easy Cite</div>', $mylist);
$mylist = preg_replace("/RMIT Harvard<div class=\"layer\" aria-hidden=\"true\">whichguidetitle<\/div>/", 'RMIT Harvard<div class="layer" aria-hidden="true">RMIT Harvard</div>', $mylist);
$mylist = preg_replace("/AGLC4<div class=\"layer\" aria-hidden=\"true\">whichguidetitle<\/div>/", 'AGLC4<div class="layer" aria-hidden="true">AGLC4</div>', $mylist);
$mylist = preg_replace("/APA 7<sup>th<\/sup> ed.<div class=\"layer\" aria-hidden=\"true\">whichguidetitle<\/div>/", 'APA 7<sup>th</sup> ed.<div class="layer" aria-hidden="true">APA 7<sup>th</sup> ed.</div>', $mylist);
$mylist = preg_replace("/Chicago A<div class=\"layer\" aria-hidden=\"true\">whichguidetitle<\/div>/", 'Chicago A<div class="layer" aria-hidden="true">Chicago A</div>', $mylist);
$mylist = preg_replace("/Chicago B<div class=\"layer\" aria-hidden=\"true\">whichguidetitle<\/div>/", 'Chicago B<div class="layer" aria-hidden="true">Chicago B</div>', $mylist);
$mylist = preg_replace("/IEEE<div class=\"layer\" aria-hidden=\"true\">whichguidetitle<\/div>/", 'IEEE<div class="layer" aria-hidden="true">IEEE</div>', $mylist);
$mylist = preg_replace("/Vancouver<div class=\"layer\" aria-hidden=\"true\">whichguidetitle<\/div>/", 'Vancouver<div class="layer" aria-hidden="true">Vancouver</div>', $mylist);
	
//PILLS
$mylist = preg_replace("/<h6>start-style-guide<\/h6>/", '<div class="tab-content" id="nav-tabContent-xx"><div class="tab-pane fade" id="nav-xx" role="tabpanel" aria-labelledby="nav-xx-tab"><div class="d-flex flex-row flex-wrap">', $mylist);
$mylist = preg_replace("/<h6>start-type-menu<\/h6>/", '<div class="col-sm-3 flex-shrink-1 me-auto"><div class="nav flex-column nav-pills me-3" id="stn" role="tablist" aria-orientation="vertical">', $mylist);
$mylist = preg_replace("/<h2>/", '<button class="nav-link btn btn-outline myleftpills" id="stn-yy" data-bs-toggle="pill" data-bs-target="#sgt-yy" type="button" role="tab" tabindex="0" aria-controls="sgt-yy" aria-selected="false" onclick="myFunction(this, \'thishash1\')">', $mylist); 
$mylist = preg_replace("/<\/h2>/s", '</button>', $mylist);
$mylist = preg_replace("/<h6>end-type-menu<\/h6>/", '<h2 class="printtitle" id="print-title">'.$thestyleguidetitle.' style guide</h2><button class="nav-link btn btn-outline myleftpills guideprint" id="sgt-print-tab" type="button" onclick="printThisGuide(this);">Print this style guide<br />(opens new window)</button></div><p>&nbsp;</p></div>', $mylist);	
	
// ACCORDIONS
$mylist = preg_replace("/<h6>start-content-area<\/h6>/", '<div class="col-12 col-sm-9 flex-grow-1"><div id="printable-guide"><div class="tab-content" id="stnContent-yy">', $mylist);
$mylist = preg_replace("/<h6>start-type-content<\/h6>/", '<div class="tab-pane fade" id="sgt-yy" role="tabpanel" aria-labelledby="stn-yy"><div class="d-md-flex justify-content-md-end"><button class="notabutton bi bi-printer partprint" id="printthistype" type="button" tabindex="0" onclick="printThisGuide(this);">Print this part of the style guide (opens new window) <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-printer" viewBox="0 0 16 16">
  <path d="M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"/>
  <path d="M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"/>
</svg></button></div>', $mylist);	
	
// ACCORDION ITEMS
$mylist = preg_replace("/<h6>start-subtype<\/h6>/s", '<div class="accordion" id="accordionExample-zz">', $mylist);
$mylist = preg_replace("/<h6>start-subtype-item<\/h6>/s", '<div class="accordion-item" id="accordion-item-zz">', $mylist);
$mylist = preg_replace("/<h3>/s", '<h3 class="accordion-header mt-1" id="heading-zz"><button class="accordion-button easyaccbutton collapsed" type="button" tabindex="0" data-bs-toggle="collapse" data-bs-target="#subtype-zz" aria-expanded="false" aria-controls="collapse-zz" onclick="myFunction(this, \'thishash2\')">', $mylist);
$mylist = preg_replace("/<\/h3>/s", '</button></h3>', $mylist);		
$mylist = preg_replace("/<h6>start-subtype-content<\/h6>/s", '<div class="accordion-collapse collapse" id="subtype-zz" aria-labelledby="heading-zz" data-bs-parent="#accordionExample-0">
      <div class="accordion-body">', $mylist);
$mylist = preg_replace("/<h6>end-subtype-content<\/h6>/s", '<div class="d-md-flex justify-content-md-end"><button class="notabutton bi bi-printer sectionprint" tabindex="0" onClick="printThisGuide(this)">Print this section only (opens new window) <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-printer" viewBox="0 0 16 16">
  <path d="M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"/>
  <path d="M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"/>
</svg></button></div></div></div>', $mylist);
$mylist = preg_replace("/<h6>end-subtype-item<\/h6>/s", '</div>', $mylist);
$mylist = preg_replace("/<h6>end-subtype<\/h6>/s", '</div>', $mylist);
$mylist = preg_replace("/<h6>end-type-content<\/h6>/s", '</div>', $mylist);
$mylist = preg_replace("/<h6>end-content-area<\/h6>/s", '</div></div></div>', $mylist);
$mylist = preg_replace("/<h6>end-style-guide<\/h6>/s", '</div></div></div>', $mylist);
	
// CUSTOM TAGS TO CLASSES
// these custom tags are used in the markdown (.md) files where markdown limitations required inventing 
// tags that could then be replaced with <p> or <div> and classes that have specific styles in the CSS
// HANGING INDENTS
$mylist = preg_replace("/{.hanging-indent}/s", '<div class="hanging-indent">', $mylist);
$mylist = preg_replace("/{\/.hanging-indent}/s", '</div>', $mylist);
// FOOTNOTE INDENTS
$mylist = preg_replace("/{.footnote-indent}/s", '<div class="footnote-indent">', $mylist);
$mylist = preg_replace("/{\/.footnote-indent}/s", '</div>', $mylist);
// IEEE reference list
$mylist = preg_replace("/{.ieee-refs}/s", '<div class="ieee-refs">', $mylist);
$mylist = preg_replace("/{\/.ieee-refs}/s", '</div>', $mylist);
// CENTRE ALIGN TEXT
$mylist = preg_replace("/{.centre-align}/s", '<p class="centre-align">', $mylist);
$mylist = preg_replace("/{\/.centre-align}/s", '</p>', $mylist);
// FIGURE TEXT
$mylist = preg_replace("/{.figure-text}/s", '<p class="figure-text">', $mylist);
$mylist = preg_replace("/{\/.figure-text}/s", '</p>', $mylist);
// GREY BACKGROUND FOR TABLE CELL CONTENT
$mylist = preg_replace("/<grey>/s", '<div class="grey">', $mylist);
$mylist = preg_replace("/<\/grey>/s", '</div>', $mylist);
// END CONTENT
	
	
// REPLACE FOR FIRST
//replace property for the first tab, pill, accordion only - to show, true or active
$mylist = preg_replace("/class=\"tab-pane fade\" id=\"nav/", 'class="tab-pane fade show active" id="nav', $mylist, 1);
$mylist = preg_replace("/class=\"tab-pane fade\" id=\"v/", 'class="tab-pane fade show active" id="v', $mylist, 1);
// first accordion button remove collapsed
$mylist = preg_replace("/<!-- first accordion item -->\s<div class=\"accordion-collapse collapse/", '<!-- first accordion item --><div class="accordion-collapse collapse show', $mylist, 1); //remove number "1" to open all first accordion items

//$mylist = preg_replace("/class=\"accordion-button easyaccbutton collapsed\"", 'class="accordion-button easyaccbutton"', $mylist, 1);	
$mylist = preg_replace("/aria-selected=\"false\"/", 'aria-selected="true"', $mylist, 1);
$mylist = preg_replace("/nav-link myleftpills/", 'nav-link myleftpills active', $mylist, 1);
$mylist = preg_replace("/aria-expanded=\"false\"/", 'aria-expanded="true"', $mylist, 1);
	
// COUNTERS
//loop through bootstrap classes to allocate unique identifyers to each iteration of that class 
// so that bootstrap tabs, pills and accordians will match and work
//set unique ID names for TABS
$counter0 = 0;
preg_match_all("/id=\"nav-tabContent-xx\"/", $mylist, $matches0 );
foreach($matches0[0] as $titles0){
	$mylist = preg_replace("/id=\"nav-tabContent-xx\"/", "id=\"nav-tabContent-$counter0\"", $mylist, 1);
	++$counter0;
}	
$counter1 = 0;
preg_match_all("/id=\"nav-xx-tab\"/", $mylist, $matches1 );
foreach($matches1[0] as $titles1){
	$mylist = preg_replace("/id=\"nav-xx-tab\"/", "id=\"nav-$counter1-tab\"", $mylist, 1);
	++$counter1;
}
$counter111 = 0;
preg_match_all("/id=\"nav-link-xx\"/", $mylist, $matches111 );
foreach($matches111[0] as $titles111){
	$mylist = preg_replace("/id=\"nav-link-xx\"/", "id=\"nav-link-$counter111\"", $mylist, 1);
	++$counter111;
}
$counter2 = 0;
preg_match_all("/data-bs-target=\"#nav-xx\"/", $mylist, $matches2 );
foreach($matches2[0] as $titles2){
	$mylist = preg_replace("/data-bs-target=\"#nav-xx\"/", "data-bs-target=\"#nav-$counter2\"", $mylist, 1);
	++$counter2;
}
$counter3 = 0;
preg_match_all("/aria-controls=\"nav-xx\"/", $mylist, $matches3 );
foreach($matches3[0] as $titles3){
	$mylist = preg_replace("/aria-controls=\"nav-xx\"/", "aria-controls=\"nav-$counter3\"", $mylist, 1);
	++$counter3;
}
$counter4 = 0;
preg_match_all("/id=\"nav-xx\"/", $mylist, $matches4 );
foreach($matches4[0] as $titles4){
	$mylist = preg_replace("/id=\"nav-xx\"/", "id=\"nav-$counter4\"", $mylist, 1);
	++$counter4;
}
$counter5 = 0;
preg_match_all("/aria-labelledby=\"nav-xx-tab\"/", $mylist, $matches5 );
foreach($matches5[0] as $titles5){
	$mylist = preg_replace("/aria-labelledby=\"nav-xx-tab\"/", "aria-labelledby=\"nav-$counter5-tab\"", $mylist, 1);
	++$counter5;
}
//set unique ID names for PILLS
$counter60 = 0;
preg_match_all("/id=\"stnContent-yy\"/", $mylist, $matches60 );
foreach($matches60[0] as $titles60){
	$mylist = preg_replace("/id=\"stnContent-yy\"/", "id=\"stnContent-$counter60\"", $mylist, 1);
	++$counter60;
}		
$counter6 = 0;
preg_match_all("/id=\"stn-yy\"/", $mylist, $matches6 );
foreach($matches6[0] as $titles6){
	$mylist = preg_replace("/id=\"stn-yy\"/", "id=\"stn-$counter6\"", $mylist, 1);
	++$counter6;
}

$counter7 = 0;
preg_match_all("/data-bs-target=\"#sgt-yy\"/", $mylist, $matches7 );
foreach($matches7[0] as $titles7){
	$mylist = preg_replace("/data-bs-target=\"#sgt-yy\"/", "data-bs-target=\"#sgt-$counter7\"", $mylist, 1);
	++$counter7;
}
$counter8 = 0;
preg_match_all("/aria-controls=\"sgt-yy\"/", $mylist, $matches8 );
foreach($matches8[0] as $titles8){
	$mylist = preg_replace("/aria-controls=\"sgt-yy\"/", "aria-controls=\"sgt-$counter8\"", $mylist, 1);
	++$counter8;
}
$counter9 = 0;
preg_match_all("/id=\"sgt-yy\"/", $mylist, $matches9 );
foreach($matches9[0] as $titles9){
	$mylist = preg_replace("/id=\"sgt-yy\"/", "id=\"sgt-$counter9\"", $mylist, 1);
	++$counter9;
}
$counter10 = 0;
preg_match_all("/aria-labelledby=\"stn-yy\"/", $mylist, $matches10 );
foreach($matches10[0] as $titles10){
	$mylist = preg_replace("/aria-labelledby=\"stn-yy\"/", "aria-labelledby=\"stn-$counter10\"", $mylist, 1);
	++$counter10;
}		
//set unique ID names for ACCORDIONS
$counter16 = 0;
preg_match_all("/id=\"accordionExample-zz\"/", $mylist, $matches16 );
foreach($matches16[0] as $titles16){
	$mylist = preg_replace("/id=\"accordionExample-zz\"/", "id=\"accordionExample-$counter16\"", $mylist, 1);
	++$counter16;
}
$counter110 = 0;
preg_match_all("/id=\"accordion-item-zz\"/", $mylist, $matches110 );
foreach($matches110[0] as $titles110){
	$mylist = preg_replace("/id=\"accordion-item-zz\"/", "id=\"accordion-item-$counter110\"", $mylist, 1);
	++$counter110;
}	
$counter11 = 0;
preg_match_all("/id=\"heading-zz\"/", $mylist, $matches11 );
foreach($matches11[0] as $titles11){
	$mylist = preg_replace("/id=\"heading-zz\"/", "id=\"heading-$counter11\"", $mylist, 1);
	++$counter11;
}	
$counter12 = 0;
preg_match_all("/data-bs-target=\"#subtype-zz\"/", $mylist, $matches12 );
foreach($matches12[0] as $titles12){
	$mylist = preg_replace("/data-bs-target=\"#subtype-zz\"/", "data-bs-target=\"#subtype-$counter12\"", $mylist, 1);
	++$counter12;
}
$counter13 = 0;
preg_match_all("/aria-controls=\"collapse-zz\"/", $mylist, $matches13 );
foreach($matches13[0] as $titles13){
	$mylist = preg_replace("/aria-controls=\"collapse-zz\"/", "aria-controls=\"collapse-$counter13\"", $mylist, 1);
	++$counter13;
}
$counter14 = 0;
preg_match_all("/aria-labelledby=\"heading-zz\"/", $mylist, $matches14 );
foreach($matches14[0] as $titles14){
	$mylist = preg_replace("/aria-labelledby=\"heading-zz\"/", "aria-labelledby=\"heading-$counter14\"", $mylist, 1);
	++$counter14;
}
$counter17 = 0;
preg_match_all("/data-bs-parent=\"#accordionExample-zz\"/", $mylist, $matches17 );
foreach($matches17[0] as $titles17){
	$mylist = preg_replace("/data-bs-parent=\"#accordionExample-zz\"/", "data-bs-parent=\"#accordionExample-$counter17\"", $mylist, 1);
	++$counter17;
}
$counter15 = 0;
preg_match_all("/id=\"subtype-zz\"/", $mylist, $matches15 );
foreach($matches15[0] as $titles15){
	$mylist = preg_replace("/id=\"subtype-zz\"/", "id=\"subtype-$counter15\"", $mylist, 1);
	++$counter15;
}
// REPLACE pills buttons javascript with unique ID
$counter18 = 0;
preg_match_all("/thishash1/", $mylist, $matches18 );
foreach($matches18[0] as $titles18){
	$mylist = preg_replace("/thishash1/", "#stn-$counter18", $mylist, 1);
	++$counter18;
}
// REPLACE accordion buttons javascript with unique ID
$counter19 = 0;
preg_match_all("/thishash2/", $mylist, $matches19 );
foreach($matches19[0] as $titles19){
	$mylist = preg_replace("/thishash2/", "#subtype-$counter19", $mylist, 1);
	++$counter19;
}
// REPLACE top tab buttons javascript with unique ID
$counter20 = 0;
preg_match_all("/thisstyleguide/", $mylist, $matches20 );
foreach($matches20[0] as $titles20){
	$mylist = preg_replace("/thisstyleguide/", "styleguide-$counter20", $mylist, 1);
	++$counter20;
}
//make the correct styleguide tab active
if ($whichstyleguide == "styleguide-0"){
	$mylist = preg_replace("/id=\"nav-link-0\" class=\"nav-link/", 'id="nav-link-0" class="nav-link active', $mylist, 1); 
}	else if ($whichstyleguide == "styleguide-1"){
	$mylist = preg_replace("/id=\"nav-link-1\" class=\"nav-link/", 'id="nav-link-1" class="nav-link active', $mylist, 1); 
}	else if ($whichstyleguide == "styleguide-2"){
	$mylist = preg_replace("/id=\"nav-link-2\" class=\"nav-link/", 'id="nav-link-2" class="nav-link active', $mylist, 1);  
}	else if ($whichstyleguide == "styleguide-3"){
	$mylist = preg_replace("/id=\"nav-link-3\" class=\"nav-link/", 'id="nav-link-3" class="nav-link active', $mylist, 1);  
}	else if ($whichstyleguide == "styleguide-4"){
	$mylist = preg_replace("/id=\"nav-link-4\" class=\"nav-link/", 'id="nav-link-4" class="nav-link active', $mylist, 1);  
}	else if ($whichstyleguide == "styleguide-5"){
	$mylist = preg_replace("/id=\"nav-link-5\" class=\"nav-link/", 'id="nav-link-5" class="nav-link active', $mylist, 1);  
}	else if ($whichstyleguide == "styleguide-6"){
	$mylist = preg_replace("/id=\"nav-link-6\" class=\"nav-link/", 'id="nav-link-6" class="nav-link active', $mylist, 1);  
}	else if ($whichstyleguide == "styleguide-7"){
	$mylist = preg_replace("/id=\"nav-link-7\" class=\"nav-link/", 'id="nav-link-6" class="nav-link active', $mylist, 1); 
}	else {
	$mylist = preg_replace("/id=\"nav-link-0\" class=\"nav-link/", 'id="nav-link-0" class="nav-link active', $mylist, 1);  
}
	
// ISSUES TO BE RESOLVED / Development to-do list
// change the code from PHP to Javascript to show first accordion item in an accordion then won't need the comment in  markdown
// need to strip all COMMENTS out of $mylist after all replaces are done	
// change layout - make first tab the "Using Easy Cite" tab so style guides are not selected by default. remove how to from banner.
	
	
//OUTPUT THE PARSED CONTENT TO HTML
echo($mylist);
?>
<!-- start info box-->
<div id="ecinfopane" style="display: <?= $showInfobox?>">
	<h3><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-2.033 16.01c.564-1.789 1.632-3.932 1.821-4.474.273-.787-.211-1.136-1.74.209l-.34-.64c1.744-1.897 5.335-2.326 4.113.613-.763 1.835-1.309 3.074-1.621 4.03-.455 1.393.694.828 1.819-.211.153.25.203.331.356.619-2.498 2.378-5.271 2.588-4.408-.146zm4.742-8.169c-.532.453-1.32.443-1.761-.022-.441-.465-.367-1.208.164-1.661.532-.453 1.32-.442 1.761.022.439.466.367 1.209-.164 1.661z"/></svg>&nbsp;How to use the Easy Cite referencing guide</h3>
    <div class="d-flex flex-row flex-wrap">
        <div class="col-12 col-sm-6 colpad">
            <h5>Easy Cite lets you look up referencing tips and examples in a selection of common styles used at RMIT.</h5>
			<p>The styles included are RMIT Harvard, AGLC4, APA, Chicago A: footnotes and bibliography, Chicago B: author-date, IEEE, and Vancouver.</p>
            <p>Easy Cite includes as many examples of reference types as possible. If the style guides shown here do not include your specific reference or citation type, consider applying the format from similar types within Easy Cite for your reference and citation, or check the relevant style manual.</p>
            <p>Easy Cite is intended as a guide only and some styles are open to interpretation. You should always check with your instructor to ensure you are using the correct style for your assignments and assessment tasks.</p>
			<p>Visit the <a href="https://emedia.rmit.edu.au/learninglab/content/referencing" target="_blank">Learning Lab Referencing Tutorial (opens in a new tab)</a> and find out how to correctly use different referencing styles in academic writing to avoid plagiarism and get better marks.</p>
        </div>
		<div class="col-12 col-sm-6 colpad">	
			<h5>Select a style guide from the tabs above to start using Easy Cite.</br>
           Or view this instructional video first...</h5>
		
            <p><iframe width="537" height="302" src="https://www.youtube.com/embed/60J55xXbu8o" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></p>
            <p><a href="transcripts/EasyCite-video-transcript.rtf">Video transcript (RTF)</a></p>
        </div>
    </div>
</div>
<!-- end info box-->	
	
</div><!-- end padding for content -->
<!-- end page content-->
		
<!-- footer content-->	
<div class="">
	<p>&nbsp;</p>
	<p>&nbsp;</p>
	<div class="footerarea">
		<div id="gotoeasycite"><a href="https://www.lib.rmit.edu.au/easy-cite/" class="footerlinks atooltip aanimate" data-tool="Link opens in a new tab" target="_blank" >Go to Easy Cite home</a> | &nbsp; </div>
			<a href="https://www.rmit.edu.au/library/study/referencing/easy-cite-feedback" target="_blank" class="footerlinks atooltip aanimate" data-tool="Send us your feedback or report errors here. Link opens in a new tab." >Send us feedback</a>&nbsp; |&nbsp; 
		<!-- Trigger modal -->
			<a type="button" class="notabutton footerlinks atooltip aanimate" data-bs-toggle="modal" data-bs-target="#exampleModal" data-tool="Select this link to see copyright and licensing information">About Easy Cite</a>
	</div>
	<p>&nbsp;</p>
	<p>&nbsp;</p>
</div>
	

<!-- Modal: About Easy Cite -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
		  <h3 class="modal-title" id="exampleModalLabel">Easy Cite referencing guide </h3> 
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>Easy Cite referencing guide by <a href="https://www.rmit.edu.au/library" target="_blank" class="modallinks" >RMIT University Library</a> is licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" class="modallinks" >Creative Commons CC BY-NC-SA 4.0</a>. </p>
		  <p>This resource is derived from a work by <a href="https://www.swinburne.edu.au/library" target="_blank" class="modallinks" >Swinburne University Library</a>, based on an original work by <a href="https://www.griffith.edu.au/library" target="_blank" class="modallinks" >Griffith University Library</a>.</p>
		  <p>(links open in new tabs)</p>
		  <p><strong>&copy; RMIT University Library</strong></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
	
<!-- end footer content-->	

<script>
// URL STRING TO SAVE AND SHOW CORRECT CONTENT
//jQuery: get URL location.hash and use it to open the correct pills and accordion
$(function(){
	if (location.hash !== null && location.hash !== "") { //check for hash
		var hash = location.hash; 
		var myArray = hash.split("#"); //split hash into two parts & save in an array
		var tabopen = myArray[1];  //first item of array - not including the first hash
		tabopen && $('div.tab-pane #' + tabopen).tab('show'); //show correct pills tab
		var accordionopen = myArray[2];  //second item of array
		accordionopen && $('#' + accordionopen).collapse('show'); //show correct accordion-collapse
     }
	else {
		$("#subtype-0").collapse("show"); // default show first accordion-collapse
		$("#stn-0").tab("show"); // default show first pills
	};
});
</script>
<script type="application/javascript">
// URL STRING TO SAVE AND SHOW CORRECT CONTENT
// script to find the URL hash string and split it 
// to identify which pill and which accordion item need to open
var tabopen;
var accordopen;
if (location.hash !== null && location.hash !== "") { //check for hash
		var hash = window.location.hash; 
		var myArray = hash.split("#"); //split hash into two parts & save in an array
		tabopen = myArray[1];  //first item of array after the hash which is zero position
		accordopen = myArray[2];  //second item of array after the hash
		
} else {
	// else default to the first pill and accordion item
	tabopen = "#stn-0";
	accordopen = "#subtype-0";
}
var globalpillshash = tabopen;
	// create a global pills variable that will hold the value of the current pills 
	// even when the accordion item is clicked.
function myFunction(button, sethash){
	// then add the global pills variable to the accordion variable if selected 
	// to enable saving the correct pills/accordion position in the URL string.
	if (sethash.includes("stn")){
	   	var pillshash = sethash;
		globalpillshash = sethash;
		//console.log(pillshash);
	   	window.location.hash = pillshash;
	}
	if (sethash.includes("subtype")){
		var accordionhash = sethash;
	   	window.location.hash = globalpillshash + accordionhash;
		//console.log(globalpillshash + accordionhash);
	}
	//keep page scrolled to the top - avoids the content jumping around when selecting vertical pills
	document.body.scrollTop = 0; // For Safari - not working
  	document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera - is working
}

// this function takes the info from the tab button to output a query string 
// that PHP can pick up to load the correct markdown file
function myFunction2(button, thisquery){
	if (thisquery.includes("styleguide")){
		const params = new URLSearchParams(location.search);
		params.set('styleguide', thisquery);
		params.toString(); // => styleguide=styleguide-3;
		console.log(params.toString());
		window.history.pushState({}, '', `${location.pathname}?${params.toString()}#stn-0`);
	}
	//refresh the page...
	location.reload();
	//	window.scroll(0,0); //need to scroll window to top of page but not working 	
	document.getElementById("nav-tab").focus();
	document.body.scrollTop = 0; // For Safari
  	document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
}

// --------------------------
// ACCORDION FAMILIES
// this function dynamically allocates the parent accordion div of the accordion-item 
// to the children's (accordion-collapse) data-bs-parent value 
// so that selecting one accordion will close the others in the group.
//find all the accordion-item divs
const mylist = document.getElementsByClassName("accordion-item"); 
	//loop through all the accordion-item divs
	for (let p = 0; p < mylist.length; p++){
		//console.log(mylist[p].id);
		//find all the children with the class name accordion-collapse
		const nodes = mylist[p].getElementsByClassName("accordion-collapse");
		//loop through the children
		for (let i = 0; i < nodes.length; i++) { 
			//set the children's value for data-bs-parent to the "grandparent" div ID name
			nodes[i].setAttribute("data-bs-parent", "#" + mylist[p].parentElement.id); 
			//console.log(nodes[i].getAttribute("data-bs-parent"));
		}
	}
// remove the "collapsed" class from the first accordion button in each accordion so it's in its "open" state
// Use this code to open all accordions first sub-type in a style guide
/*const acclist = document.getElementsByClassName("accordion");
	for (let q = 0; q < acclist.length; q++){
		const acbuttons = acclist[q].getElementsByClassName("accordion-button");
		acbuttons[0].classList.remove("collapsed");
		//console.log(acbuttons[0].className);
	}
*/	
// OR
// Use this code to only open the first accordion subtype in a style guide
//only run this code if there are accordions - i.e. not the "Using Easy Cite" tab.
var thisstatus = '<?= $showInfobox?>';
if (thisstatus == "none"){
	const acbuttons = document.getElementsByClassName("accordion-button");
	acbuttons[0].classList.remove("collapsed");
}

// -----------------------------
// PRINT SCRIPT
// this script controls the method for printing a section, part or whole guide depending on the button selected
function printThisGuide(elem) {
	// get the button class name attribute
	var thisbutton = elem.className;
	// create variable to hold the correct style guide title
	var thistitle = document.getElementById("print-title").id;
	// create variable to hold the correct div id for printing
	var thisdiv;
	console.log(thisbutton);
	if (thisbutton.includes("sectionprint")){ 
		// if this is a sectionprint button, find the great-grandparent node to print the section only
		var thisdiv = elem.parentNode.parentNode.parentNode.parentNode.id;
	} else if (thisbutton.includes("partprint")){
		// if this is a partprint button, find the grandparent node to print the part
		var thisdiv = elem.parentNode.parentNode.id;
	} else if (thisbutton.includes("guideprint")){
		// if this is a guideprint button, find the printable-guide div to print the whole guide
		var thisdiv = document.getElementById("printable-guide").id;
	}
	console.log(thisdiv);
	//put the print title into a new variable
	var printTitle = document.getElementById(thistitle).innerHTML;
	//put the HTML contents of the div for printing into a new variable
    var divContents = document.getElementById(thisdiv).innerHTML;
	//open a window, add contents
    var a = window.open('', '', 'height=1200, width=800');
    a.document.write('<html><head>');
	// link to the external stylesheet - change the stylesheet CSS file to change the appearance of the HTML
	a.document.write('<link href="css/printstyles.css" rel="stylesheet">');
	a.document.write('</head>');
    a.document.write('<body> <h1>RMIT Library: Easy Cite online referencing resource</h1>');
	a.document.write('<h2>' + printTitle + '</h2>');
    a.document.write('<div class="printsectionguide">'+ divContents + '</div>');
    a.document.write('</body></html>');
    a.document.close();
	// open print dialogue with a slight delay to allow the CSS to load first
	var timesRun = 0;
	var interval = setInterval(function(){
    	timesRun += 1;
    	if(timesRun === 1){
        	clearInterval(interval);
    	}
    a.print();
	}, 500); 
	a.document.close();
   a.focus();
}
// -----------------------------
// INSTRUCTIONS TOGGLE
// toggle the instructions box text - open/close
function textToggle(elem){
	var thiscol = document.getElementById('collapseExample');
	var colstatus = thiscol.getAttribute('aria-expanded');
	if (colstatus == 'false'){
		document.getElementById('textoggle').innerHTML = "close";
		thiscol.setAttribute("aria-expanded", "true");
		console.log("open");
	} else if (colstatus == 'true') {
		document.getElementById('textoggle').innerHTML = "close";	
		thiscol.setAttribute("aria-expanded", "false");
		console.log("close");
	}
}

// -----------------------------
// HIDE BANNER IN IFRAME
// and show a different page title, 
// and link to the actual Easy Cite page in the footer
function iniFrame() {
    if ( window.location !== window.parent.location )
    { 
        // The page is in an iFrames
		document.getElementById("embedhide").style.display = "none";
		document.getElementById("gotoeasycite").style.display = "block";
		//console.log(document.getElementById("gotoeasycite").className);
    } 
    else {
        // The page is not in an iFrame
        //document.write("The page is not in an iFrame");
		document.getElementById("embedhide").style.display = "block";
		document.getElementById("gotoeasycite").style.display = "none";
		//console.log(document.getElementById("gotoeasycite").className);
    }
}
  
// Calling iniFrame function
iniFrame();
</script>
</body>
</html>
